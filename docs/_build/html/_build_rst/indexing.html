

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Indexing &mdash; dimarray 0.1.8.dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.8.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="dimarray 0.1.8.dev documentation" href="../index.html" />
    <link rel="up" title="Documentation" href="../by_topic.html" />
    <link rel="next" title="Reindexing: align axes" href="reindexing.html" />
    <link rel="prev" title="DimArray: data structure and attributes" href="data_structure.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reindexing.html" title="Reindexing: align axes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="data_structure.html" title="DimArray: data structure and attributes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">dimarray 0.1.8.dev documentation</a> &raquo;</li>
          <li><a href="../by_topic.html" accesskey="U">Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="indexing">
<span id="page-indexing"></span><h1>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h1>
<p>Let&#8217;s first define an array to test indexing</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dimarray</span> <span class="kn">import</span> <span class="n">DimArray</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">DimArray</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]],</span> <span class="n">axes</span><span class="o">=</span><span class="p">[[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="s">&quot;d&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">10.</span><span class="p">,</span><span class="mf">20.</span><span class="p">]],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x0&#39;</span><span class="p">,</span><span class="s">&#39;x1&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span>
<span class="go">dimarray: 8 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;, &#39;x1&#39;</span>
<span class="go">0 / x0 (4): a to d</span>
<span class="go">1 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 3.,  4.],</span>
<span class="go">       [ 5.,  6.],</span>
<span class="go">       [ 7.,  8.]])</span>
</pre></div>
</div>
<div class="section" id="basics-integer-array-slice">
<span id="id1"></span><h2>Basics: integer, array, slice<a class="headerlink" href="#basics-integer-array-slice" title="Permalink to this headline">¶</a></h2>
<p>There are various ways of indexing a DimArray, and all follow numpy&#8217;s rules, except that in the default behaviour indices refer to axis values and not to position on the axis, in contrast to numpy.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span>  <span class="c"># extract a single item</span>
<span class="go">2.0</span>
</pre></div>
</div>
<p>The <cite>ix</cite> attrubutes is the pendant for position (integer) indexing (and exclusively so !). It is therefore similar to indexing on the <cite>values</cite> attribute, except that it returns a new DimArray, where v.values[...] would return a numpy ndarray.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>
<span class="go">dimarray: 2 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x1&#39;</span>
<span class="go">0 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([ 1.,  2.])</span>
</pre></div>
</div>
<p>Note that the last element of slices is INCLUDED, contrary to numpy&#8217;s position indexing. Step argument is always intrepreted as an integer.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>  <span class="c"># &#39;c&#39; is INCLUDED</span>
<span class="go">dimarray: 3 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;</span>
<span class="go">0 / x0 (3): a to c</span>
<span class="go">array([ 1.,  3.,  5.])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],</span><span class="mi">10</span><span class="p">]</span>  <span class="c"># it is possible to provide a list</span>
<span class="go">dimarray: 2 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;</span>
<span class="go">0 / x0 (2): a to c</span>
<span class="go">array([ 1.,  5.])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">x0</span> <span class="o">!=</span> <span class="s">&#39;b&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>  <span class="c"># boolean indexing is also fine</span>
<span class="go">dimarray: 3 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;</span>
<span class="go">0 / x0 (3): a to d</span>
<span class="go">array([ 1.,  5.,  7.])</span>
</pre></div>
</div>
<p>If several array-like indices are provided, they are broadcast into a single shape (like numpy does), and values are extracted along the corresponding line.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]]</span>  <span class="c"># it is possible to provide a list</span>
<span class="go">dimarray: 2 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0,x1&#39;</span>
<span class="go">0 / x0,x1 (2): (&#39;a&#39;, &#39;10.0&#39;) to (&#39;c&#39;, &#39;20.0&#39;)</span>
<span class="go">array([ 1.,  6.])</span>
</pre></div>
</div>
<p>This is in contrast to matlab or pandas, which use box-like indexing, along each dimension independently. This can be achieved with the <cite>box</cite> attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">box</span><span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]]</span>  <span class="c"># indexing on each dimension, individually</span>
<span class="go">dimarray: 4 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;, &#39;x1&#39;</span>
<span class="go">0 / x0 (2): a to c</span>
<span class="go">1 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 5.,  6.]])</span>
</pre></div>
</div>
</div>
<div class="section" id="modify-array-values">
<span id="id2"></span><h2>Modify array values<a class="headerlink" href="#modify-array-values" title="Permalink to this headline">¶</a></h2>
<p>All the above can be used to change array values, consistently with what you would expect.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span>
<span class="go">dimarray: 8 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;, &#39;x1&#39;</span>
<span class="go">0 / x0 (4): a to d</span>
<span class="go">1 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 3.,  4.],</span>
<span class="go">       [ 5.,  6.],</span>
<span class="go">       [ 7.,  8.]])</span>
</pre></div>
</div>
</div>
<div class="section" id="take-and-put-methods">
<span id="id3"></span><h2>take and put methods<a class="headerlink" href="#take-and-put-methods" title="Permalink to this headline">¶</a></h2>
<p>These two methods are the machinery to accessing and modifying items in the examples above.
They may be useful to use directly for generic programming.
They are similar to numpy methods of the same name, but also work in multiple dimensions.
In particular, they both take dictionary, tuples and boolean arrays as <cite>indices</cite> argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">DimArray</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="s">&quot;d&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">10.</span><span class="p">,</span><span class="mf">20.</span><span class="p">]],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x0&#39;</span><span class="p">,</span><span class="s">&#39;x1&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:,</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s">&#39;x1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">({</span><span class="s">&#39;x1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span> <span class="c"># dict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">((</span><span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span><span class="mi">10</span><span class="p">))</span> <span class="c"># tuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">c</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">d</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">e</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">dimarray: 4 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;</span>
<span class="go">0 / x0 (4): a to d</span>
<span class="go">array([ 1.,  3.,  5.,  7.])</span>
</pre></div>
</div>
<p>The two latter forms, <cite>tuple</cite> or <cite>dict</cite>, allow performing multi-indexing. Array broadcasting is controlled by &#8220;broadcast_arrays&#8221; parameter.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">({</span><span class="s">&#39;x0&#39;</span><span class="p">:[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="s">&#39;x1&#39;</span><span class="p">:[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]})</span>
<span class="go">dimarray: 2 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0,x1&#39;</span>
<span class="go">0 / x0,x1 (2): (&#39;a&#39;, &#39;10.0&#39;) to (&#39;b&#39;, &#39;20.0&#39;)</span>
<span class="go">array([ 1.,  4.])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">({</span><span class="s">&#39;x0&#39;</span><span class="p">:[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="s">&#39;x1&#39;</span><span class="p">:[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]},</span> <span class="n">broadcast_arrays</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>  <span class="c">#  same as v.box[[&#39;a&#39;,&#39;b&#39;],[10, 20]]</span>
<span class="go">dimarray: 4 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;, &#39;x1&#39;</span>
<span class="go">0 / x0 (2): a to b</span>
<span class="go">1 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 3.,  4.]])</span>
</pre></div>
</div>
<p>The &#8216;indexing&#8217; parameter can be set to <cite>position</cite> (same as <cite>ix</cite>) instead of <cite>values</cite></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s">&#39;position&#39;</span><span class="p">)</span>
<span class="go">dimarray: 4 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;</span>
<span class="go">0 / x0 (4): a to d</span>
<span class="go">array([ 1.,  3.,  5.,  7.])</span>
</pre></div>
</div>
<p>Note the <cite>put</cite> command returns a copy by default (<cite>inplace=</cite> can be passed as True, though).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="o">-</span><span class="mi">99</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s">&#39;x1&#39;</span><span class="p">)</span>
<span class="go">dimarray: 8 non-null elements (0 null)</span>
<span class="go">dimensions: &#39;x0&#39;, &#39;x1&#39;</span>
<span class="go">0 / x0 (4): a to d</span>
<span class="go">1 / x1 (2): 10.0 to 20.0</span>
<span class="go">array([[-99.,   2.],</span>
<span class="go">       [-99.,   4.],</span>
<span class="go">       [-99.,   6.],</span>
<span class="go">       [-99.,   8.]])</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Indexing</a><ul>
<li><a class="reference internal" href="#basics-integer-array-slice">Basics: integer, array, slice</a></li>
<li><a class="reference internal" href="#modify-array-values">Modify array values</a></li>
<li><a class="reference internal" href="#take-and-put-methods">take and put methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="data_structure.html"
                        title="previous chapter">DimArray: data structure and attributes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reindexing.html"
                        title="next chapter">Reindexing: align axes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/_build_rst/indexing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reindexing.html" title="Reindexing: align axes"
             >next</a> |</li>
        <li class="right" >
          <a href="data_structure.html" title="DimArray: data structure and attributes"
             >previous</a> |</li>
        <li><a href="../index.html">dimarray 0.1.8.dev documentation</a> &raquo;</li>
          <li><a href="../by_topic.html" >Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Mahe Perrette.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>